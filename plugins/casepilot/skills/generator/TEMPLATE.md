# Markdown 测试用例模板

## 混合结构格式规范

生成的 Markdown 文件采用 **混合结构格式**（标题 + 无序列表），以便 markmap 正确渲染 7 层链式结构。

### 层级格式规范

| 层级 | 内容 | 格式 |
|------|------|------|
| L1 | 文档标题 | `# ` |
| L2 | 模块名 | `## ` |
| L3 | 用例名 | `### ` |
| L4 | 前置条件 | `- ` |
| L5 | 测试步骤 | `  - ` (2空格缩进) |
| L6 | 预期结果 | `    - ` (4空格缩进) |
| L7 | 优先级 | `      - ` (6空格缩进) |

---

## 基础模板

```markdown
# {项目名称}测试用例

## 1. {模块名称}

### {用例名称}
- {前置条件}
  - {执行步骤}
    - {预期结果}
      - {优先级}
```

## 常见测试模块模板

### 编译构建测试

```markdown
## 编译构建测试

### {目标平台}编译成功验证
- 已安装{工具链}和{目标}
  - 在{目录}执行 {编译命令}
    - 编译成功，无错误输出，生成目标产物
      - P0
```

### PRD UI/交互设计测试

```markdown
## PRD UI/交互设计测试

### 界面布局-{区域名称}显示正确
- 应用已启动，进入{页面名称}
  - 观察{区域名称}的布局和显示
    - {区域名称}正确显示在{位置}，包含{组件列表}
      - P0

### 交互操作-{操作名称}响应正确
- 应用处于{状态}，{组件}可见
  - 执行{操作}（点击/拖拽/输入）
    - {预期响应}，界面{变化描述}
      - P0
```

### 会话/连接管理测试

```markdown
## 会话管理测试-{阶段}

### {请求类型}请求正常处理
- {组件}处于{状态}状态
  - 发送{请求类型}请求（{参数}）
    - 返回{响应类型}响应，{验证点}，状态变为{新状态}
      - P0
```

### 心跳/超时测试

```markdown
## 心跳超时检测

### 心跳超时检测-{场景}
- {组件}处于Active状态，{参数}={值}
  - 超过{时间}未发送心跳，调用{检测方法}
    - {计数器}增加，状态{变化描述}
      - P0
```

### 功能测试

```markdown
## 功能测试

### {功能名称}-正常流程
- {前置条件描述}
  - {操作步骤}
    - {预期结果}
      - P0
```

### 状态机测试

```markdown
## {状态上下文}状态机测试

### 状态转换-{起始状态}到{目标状态}
- {上下文}处于{起始状态}状态
  - {触发条件/事件}
    - 状态变为{目标状态}，{附加验证}
      - P0
```

### 边界值测试

```markdown
## 边界值测试

### {字段名称}-最大值边界
- {功能}正常可用
  - 输入{字段}={最大值}，执行{操作}
    - {预期结果}
      - P1

### {字段名称}-超过最大值
- {功能}正常可用
  - 输入{字段}={最大值+1}，执行{操作}
    - 提示错误，{错误描述}
      - P1
```

### 异常/错误处理测试

```markdown
## 错误处理测试

### {错误类型}错误-{触发条件}
- {组件}正常运行
  - {触发错误的操作}
    - 返回{错误类型}错误，{错误处理描述}
      - P1
```

### 配置测试

```markdown
## {配置类}配置测试

### {配置项}配置-{场景}
- 创建{配置类}实例
  - 设置{配置项}为{值}
    - 配置成功，{配置项}值为{值}{说明}
      - P1
```

### 兼容性测试

```markdown
## 兼容性测试

### {平台/环境}兼容性验证
- 在{平台/环境}上部署应用
  - 执行{核心功能}
    - 功能正常，无兼容性问题
      - P1
```

### 软件/固件兼容性测试（重点）

```markdown
## 软件固件兼容性测试

### 新软件+旧固件-{功能名称}验证
- 设备运行旧版本固件V{X.X}，安装新版本软件V{Y.Y}
  - 执行{核心功能操作}
    - {功能}正常工作，新旧版本协同正常
      - P0

### 旧软件+新固件-{功能名称}验证
- 设备运行新版本固件V{X.X}，安装旧版本软件V{Y.Y}
  - 执行{核心功能操作}
    - {功能}正常工作，新旧版本协同正常
      - P0

### 协议版本兼容-{协议名称}
- 客户端使用协议V{X}，服务端使用协议V{Y}
  - 发起{通信操作}
    - 协议协商成功，通信正常
      - P0

### 数据格式兼容-{数据类型}
- 存在旧版本格式的{数据类型}数据
  - 使用新版本软件读取/处理该数据
    - 数据正确解析，功能正常
      - P0

### 升级路径验证-从V{X}升级到V{Y}
- 系统运行旧版本V{X}，数据正常
  - 执行升级到V{Y}的操作
    - 升级成功，数据完整迁移，功能正常
      - P0

### 降级回滚验证-从V{Y}回滚到V{X}
- 系统运行新版本V{Y}
  - 执行回滚到V{X}的操作
    - 回滚成功，系统恢复到旧版本状态
      - P1

### 配置兼容-旧配置在新版本中的处理
- 存在旧版本的配置文件
  - 使用新版本软件加载旧配置
    - 配置正确读取，缺省值正确填充
      - P1
```

### 性能测试

```markdown
## 性能测试

### 响应时间-{操作名称}
- 系统处于正常负载状态
  - 执行{操作}，记录响应时间
    - 响应时间小于{X}ms，满足性能要求
      - P1

### 并发处理-{并发数}用户同时操作
- 系统正常运行
  - {并发数}个用户同时执行{操作}
    - 所有请求正常处理，无错误，响应时间在可接受范围内
      - P1

### 吞吐量-{操作名称}
- 系统处于峰值负载状态
  - 持续发送{操作}请求，统计每秒处理数
    - 吞吐量达到{X}TPS，满足性能指标
      - P1

### 资源占用-{场景名称}
- 系统正常运行
  - 执行{操作场景}，监控CPU/内存/磁盘使用
    - 资源占用在合理范围内（CPU小于{X}%，内存小于{Y}MB）
      - P2
```

### 安全测试

```markdown
## 安全测试

### 权限控制-{功能名称}
- 用户未登录或无权限
  - 尝试访问{受保护功能}
    - 访问被拒绝，返回权限不足提示
      - P0

### 输入校验-{输入字段}
- 功能正常可用
  - 在{输入字段}输入恶意内容（SQL注入/XSS/特殊字符）
    - 输入被正确过滤或拒绝，系统无异常
      - P0

### 数据安全-{敏感数据}传输
- 系统正常运行
  - 执行涉及{敏感数据}的操作，抓包分析
    - {敏感数据}已加密传输，无法被窃取
      - P0

### 会话安全-会话劫持防护
- 用户已登录
  - 尝试使用过期/伪造的会话令牌访问
    - 访问被拒绝，要求重新认证
      - P1
```

### 集成测试

```markdown
## 集成测试

### {集成场景}
- {组件A}已完成，{组件B}已添加依赖
  - 执行 {集成命令/操作}
    - {集成成功验证点}
      - P0
```

### 端到端测试

```markdown
## 端到端测试

### {端到端场景}
- {测试客户端}与{设备/服务}建立连接
  - 执行{完整流程}
    - 所有步骤正确执行，{验证点}
      - P0
```

### 资源限制测试

```markdown
## 内存与资源限制测试

### {限制项}验证
- {组件}配置{限制项}={限制值}
  - 尝试{超出限制的操作}
    - {操作}失败，返回{错误类型}错误
      - P1
```

## 优先级分配指南

### P0 场景（必须测试）

- 核心业务正向流程
- 编译/构建验证
- 关键状态转换
- 主要 API 正常调用
- 端到端关键路径
- PRD UI/交互核心功能
- 验收标准直接相关
- 新旧软件/固件核心功能兼容
- 权限控制和输入校验（安全相关）

### P1 场景（应该测试）

- 配置参数验证
- 异常/错误处理
- 边界条件
- 次要 API 调用
- 状态恢复
- 主题/语言切换
- 升级/降级路径验证
- 协议版本兼容
- 数据格式兼容
- 性能基准测试（响应时间、并发处理）
- 会话安全

### P2 场景（可选测试）

- 辅助功能
- 日志/调试信息
- 性能优化验证
- 可选参数
- 稳定性测试
- 极端场景
- 资源占用监控

## 测试设计方法

### 等价类划分
- 有效等价类：正常输入
- 无效等价类：异常输入

### 边界值分析
- 最小值、最小值+1
- 最大值、最大值-1
- 默认值

### 状态转换测试
- 覆盖所有状态
- 覆盖所有转换路径
- 测试无效转换

### 错误猜测
- 文件缺失
- 网络异常
- 权限不足
- 资源不足
